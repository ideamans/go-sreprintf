# このプロジェクトは

Go 言語により、sprintf された文字列をテンプレートからリバースエンジニアリングしてパラメータを推測し、別のテンプレート(翻訳など)に再適用するライブラリを用意します。

# 関数と例

```go
func Sreprintf(template, message, translation string) (string, error)

new, err := Spreprintf("Hello %s, you have %d new messages", "Hello Alice, you have 5 new messages.", "こんにちは %sさん、あなたには%d件の新しいメッセージがあります")

// err == nil
// new == "こんにちは Aliceさん、あなたには5件の新しいメッセージがあります"
```

# 方針

展開されたオブジェクトなど、完全なパラメータのリバースエンジニアリングは不可能なので、次の型だけ保証する。

- %s - 文字列
- %d - 整数
- %f - 浮動小数点数
- %v - 汎用フォーマット（Go 特有）
- %t - bool 型（true/false）
- %% - リテラルの%記号

その他の型は文字列として解釈し、translation が与えたプレースホルダが一致しない場合はその部分を文字列に置き換えてよい。

幅指定（例：%10s, %5d）やその他のフォーマットオプション（%-10s、%+d、%#x、%.2f など）を含むプレースホルダも正しく認識し、値を抽出する。パース時はこれらのオプションを無視して値を取得し、再適用時は translation テンプレートのフォーマットオプションをそのまま使用する。

したがってエラーは極力に出さないようにするが、fmt.Sprintf がエラーとするケースはそのままエラーとする。

# テスト

テストケースは充実させたい。特に以下のケースをカバーする：

## 基本的なフォーマット

- %s, %d, %f, %v, %t の基本的な使用
- %% によるリテラル%のエスケープ

## フォーマットオプション

- 幅指定: %10s, %5d
- 左寄せ: %-10s
- 符号表示: %+d
- 代替形式: %#x, %#o
- 精度指定: %.2f, %.5s
- ゼロパディング: %05d
- 複合指定: %+10.2f, %-20.10s

## エッジケース

- プレースホルダの数が一致しない場合
- 型が一致しない場合の処理
- 空文字列、特殊文字を含む文字列
- 連続するプレースホルダ（%s%s）
- テキスト内に%を含むが、プレースホルダではない場合

# CI

Linux における単体テストだけでよい。

# README

- `./README.md` 英語
- `./README_ja.md` 日本語

相互リンクを設ける。

# ライセンス

MIT License
